<!DOCTYPE html>
<html>
<head>
  <title>ISS Tracker Realtime</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<body>
  <h2>üåç ISS Realtime Tracker</h2>
  <div id="map" style="height: 500px;"></div>

  <script>
    // Inisialisasi peta
    var map = L.map('map').setView([0, 0], 2);

    // Tambahkan tile layer
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 18,
    }).addTo(map);

    // Icon ISS
    var issIcon = L.icon({
      iconUrl: 'https://upload.wikimedia.org/wikipedia/commons/d/d0/International_Space_Station.svg',
      iconSize: [50, 32],
      iconAnchor: [25, 16]
    });

    // Marker ISS
    var marker = L.marker([0, 0], {icon: issIcon}).addTo(map);

    // Fungsi update posisi ISS
    async function updateISS() {
      const res = await fetch("http://api.open-notify.org/iss-now.json");
      const data = await res.json();
      const lat = data.iss_position.latitude;
      const lon = data.iss_position.longitude;

      // Update posisi marker
      marker.setLatLng([lat, lon]);
      map.setView([lat, lon], map.getZoom());

      console.log("ISS position:", lat, lon);
    }

    // Update pertama kali
    updateISS();

    // Update tiap 5 detik
    setInterval(updateISS, 0.500);
  </script>
</body>
</html>
